#include "BulletFunc.h"
//#include "../Skill/Bullet.h"
#include "attrFunc.h"
namespace SKILLEDITOR
{
	BSLib::s32 GetRelation(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pSource = pBullet->getSource();
//		CCharacterEntity *pDst = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pSource && pDst);
//
//		if (pSource == pDst)
//		{
//			return ett_self;
//		}
//		else if (pDst->isEnemyCamp(pSource->getCamp))
//		{
//			return ett_enemy;
//		}else
//		{
//			return ett_friend;
//		}
//Exit:
		return 0;
	}
	BSLib::s32 GetTarDebufNo(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_DebuffNo );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pTarget, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetSrcDebufNo(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pSrc = pBullet->getSource();
//		LOG_PROCESS_ERROR(pSrc);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_DebuffNo );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pSrc, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetTarFlag(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_Flag );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pTarget, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetSrcFlag(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pSrc = pBullet->getSource();
//		LOG_PROCESS_ERROR(pSrc);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_Flag );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pSrc, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetSrcMoveCondition(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pSrc = pBullet->getSource();
//		LOG_PROCESS_ERROR(pSrc);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_MOVECONDITION );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pSrc, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetTarMoveCondition(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_MOVECONDITION );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pTarget, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetTarAttrPercent(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRPERCENT );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pTarget, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetSrcAttrPercent(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pSrc = pBullet->getSource();
//		LOG_PROCESS_ERROR(pSrc);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRPERCENT );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pSrc, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetTarBuffNo(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_BUFFNO );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pTarget, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetSrcBuffNo(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		CCharacterEntity *pSrc = pBullet->getSource();
//		LOG_PROCESS_ERROR(pSrc);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_BUFFNO );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pSrc, arg);
//Exit0:
		return 0;
	}
	BSLib::s32 GetSkillAttribute(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//
//		ISkillTemplate *pSkillTemplate = pBullet->getSkillTemplate();
//		LOG_PROCESS_ERROR(pSkillTemplate);
//
//		return pSkillTemplate->getVar(arg, NULL);
//Exit0:
		return -1;
	}
	BSLib::s32 GetBulletVar(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		if (!pBullet)
//		{
//			return 0;
//		}
//		return pBullet->getVar(arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetTarAttributeA(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTEA );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pTarget, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetTarAttributeB(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTEB );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pTarget, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetTarAttributeC(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTEC );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pTarget, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetTarAttributeD(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTED );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pTarget, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetTarAttributeE(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pFighter = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pFighter);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTEE );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pFighter, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetSrcAttributeA(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pSrc = pBullet->getSource();
//		LOG_PROCESS_ERROR(pSrc);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTEA );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pSrc, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetSrcAttributeB(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pSrc = pBullet->getSource();
//		LOG_PROCESS_ERROR(pSrc);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTEB );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pSrc, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetSrcAttributeC(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pSrc = pBullet->getSource();
//		LOG_PROCESS_ERROR(pSrc);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTEC );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pSrc, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetSrcAttributeD(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pFighter = pBullet->getSource();
//		LOG_PROCESS_ERROR(pFighter);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTED );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pFighter, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetSrcAttributeE(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pFighter = pBullet->getSource();
//		LOG_PROCESS_ERROR(pFighter);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_ATTRIBUTEE );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pFighter, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetTarIsAtt(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pFighter = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pFighter);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_GETISATT );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pFighter, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetSrcIsAtt(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pFighter = pBullet->getSource();
//		LOG_PROCESS_ERROR(pFighter);
//		TGetAttr get_attr = GetAttrFunc(EATTR_MODIFY_TYPE_CHAR, EGetCharAttrFunc_GETISATT );
//		LOG_PROCESS_ERROR(get_attr);
//
//		return get_attr(pFighter, arg);
//Exit0:
		return -1;
	}
	BSLib::s32 GetIsCritical(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//		return pBullet->getIsCritical();
//Exit0:
		return 0;
	}
	BSLib::s32 GetDistance(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//		
//		CCharacterEntity *pSrc = pBullet->getSource();
//		LOG_PROCESS_ERROR(pSrc);
//		CCharacterEntity *pTarget = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pTarget);
//		return Math::Normalize(pSrc->getPosition()- pTarget->getPosition());
//Exit0:
		return 0;
	}
	BSLib::s32 GetTarNPCRank(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pFighter = pBullet->getTarget();
//		LOG_PROCESS_ERROR(pFighter);
//
//		if (pFighter->getEntityAttribute()->m_bPlayableChara)
//		{
//			return 0;
//		}
//		else
//		{
//			return pFighter->getNPCRank();
//		}
//Exit0:
		return 0;
	}
	BSLib::s32 GetSrcNPCRank(void *target, BSLib::s32 arg)
	{
//		CBullet * pBullet = (CBullet*) target;
//		LOG_PROCESS_ERROR (!pBullet);
//
//		CCharacterEntity *pFighter = pBullet->getSource();
//		LOG_PROCESS_ERROR(pFighter);
//
//		if (pFighter->getEntityAttribute()->m_bPlayableChara)
//		{
//			return 0;
//		}
//		else
//		{
//			return pFighter->getNPCRank();
//		}
//Exit0:
		return 0;
	}
	TGetAttr GetBulletAttrFunc[EGetBulletAttrFunc_COUNT] = 
	{
		NULL,
		NULL,
		GetRelation,
		GetTarDebufNo,
		GetSrcDebufNo,
		GetTarFlag,
		GetSrcFlag,
		GetTarMoveCondition,
		GetSrcMoveCondition,
		GetTarAttrPercent,
		GetSrcAttrPercent,
		GetTarBuffNo,
		GetSrcBuffNo,
		GetSkillAttribute,
		GetBulletVar,
		GetTarAttributeA,
		GetTarAttributeB,
		GetTarAttributeC,
		GetTarAttributeD,
		GetTarAttributeE,
		GetSrcAttributeA,
		GetSrcAttributeB,
		GetSrcAttributeC,
		GetSrcAttributeD,
		GetSrcAttributeE,
		GetTarIsAtt,
		GetSrcIsAtt,
		GetIsCritical,
		GetDistance,
		GetTarNPCRank,
		GetSrcNPCRank,
	};
}